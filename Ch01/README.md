## 什么是推荐系统  
1. 推荐系统的任务就是联系用户和信息，一方面帮助用户发现对自己有价值的信息，另一方面让信息能够展现在对它感兴趣的用户面前，从而实现信息消费者和信息有价值的信息，另一方面让信息能够展现在对它感兴趣的用户前面，从而实现信息消费者和信息生产者的双赢。  
2. 解决信息过载的问题中，最具有代表性的解决方案是分类目录和搜索引擎。  
3. 推荐系统不需要用户提供明确的需求，而是通过分析用户的历史行为给用户的兴趣建模，从而主动给用户推荐能够满足他们兴趣和需求的信息。  
4. 从物品的角度出发，推荐系统可以更好的发掘物品的[长尾(long tail)](https://baike.baidu.com/item/%E9%95%BF%E5%B0%BE%E7%90%86%E8%AE%BA/1002?fr=aladdin)  
5. 推荐系统通过发掘用户的行为，找到用户的个性化需求，从而将长尾商品准确的推荐给需要它的用户，帮助用户发现那些他们感兴趣但很难发现的商品。   
6. 个性化推荐系统通过分析大量用户行为日志，给不同用户提供不同的个性化页面展示，来提高点击率和转化率。  
7. 推荐系统应用都是由前台的展示页面、后台的日志系统以及推荐算法系统3部分构成的。  

## 推荐系统的应用
8. 个性化推荐的成功应用需要两个条件
* 第一是存在信息过载，因为如果用户可以很容易的从所有物品中找到喜欢的物品，就不需要个性化推荐  
* 第二是用户大部分时候没有特别明确的需求，因为用户如果有明确的需求，可以直接通过搜索引擎找到感兴趣的物品  

9. 个性化推荐系统的应用
  * 电子商务  亚马逊是个性化推荐系统的积极应用者和推广者，主要应用有个性化商品推荐列表和相关商品的推荐列表。  
    1) 个性化推荐列表采用了一种基于物品的推荐算法  
    2) 按照用户在Facebook的好友关系推荐，基于好友的个性化推荐  
    3) 相关推荐列表  
  * 电影和视频网站  Netflix  
    1) 基于物品的推荐算法  Youtube/Hulu  
  * 个性化音乐网络电台  Pandora/Last.fm/豆瓣电台  
  * 社交网络  Facebook/Twitter  
    1) 利用用户的社交网络信息对用户进行个性化的物品推荐  
    2) 信息流的会话推荐  
    3) 给用户推荐好友  
  * 个性化阅读  
    个性化阅读同样符合前面提出的需要个性化推荐的两个因素：  
    1) 互联网上的文章非常多，用户面临信息过载的问题  
    2) 用户很多时候并没有必须看某篇具体文章的需求，只是想通过阅读特定领域的文章了解这些领域的动态  
    Google Reader 关注用户分享的文章  
    Zite收集用户对文章的偏好信息  
    Digg首先根据用户的Digg历史计算用户之间的兴趣相似度，然后给用户推荐和他兴趣相似的用户喜欢的文章。  
  * 基于位置的服务  
    位置是一种很重要的上下文信息，基于位置给用户推荐离他近的且他感兴趣的服务，用户就更有可能去消费  
    基于位置的服务往往和社交网络结合在一起  
  * 个性化邮件  
    Tapestry 个性化邮件推荐系统，通过分析用户阅读邮件的历史行为和习惯对新邮件进行重新排序，从而提供用户的工作效率  
    谷歌 2010 推出优先级收件箱功能  
  * 个性化广告  
    广告定向投放  
    个性化广告投放和狭义个性化推荐的区别是，个性化推荐着重于帮助用户找到可能令他们感兴趣的物品，而广告推荐着重于帮助广告找到可能对他们感兴趣的用户，即一个是  以用户为核心，一个以广告为核心。  
    个性化广告投放技术主要分为3种  
    1) 上下文广告  
    2) 搜索广告  
    3) 个性化展示广告  

## 推荐系统评测  
10. 一个完整的推荐系统一般存在3个参与方  
  * 用户  
  * 物品提供者  
  * 提供推荐系统的网址  
  评测一个推荐算法时，需要同时考虑三方的利益，一个好的推荐系统是能够令三方共赢的系统。  

11. 在推荐系统的早期研究中，很多人将推荐系统定义为能够作出准确预测的推荐系统。  
    预测准确度是推荐系统领域的重要指标，好处是可以容易的通过离线方式计算出来，方便快速评价和选择不同的推荐算法   
    **但是，很多研究表明，准确的预测并不代表好的推荐**

12. 好的推荐系统不仅仅能够准确预测用户的行为，而且能够扩展用户的视野，帮助用户发现他们可能感兴趣，但却不那么容易发现的东西。同时，推荐系统还要能够帮助商家将那些埋没在长尾中的好商品介绍给可能会对它们感兴趣的用户。  
  评估的指标：  
  * 准确度  
  * 覆盖度  
  * 新颖度  
  * 惊喜度  
  * 信任度  
  * 透明度  

13. 推荐系统中，评测推荐效果的实验方法  
* 离线实验  
  离线实验方法步骤:  
  1) 通过日志系统获得用户行为数据，并按照一定格式生成一个标准的数据集;  
  2) 将数据集按照一定的规则分成训练集和测试集;  
  3) 在训练集上训练用户兴趣模型，在测试集上进行预测;  
  4) 通过事前定义的离线指标评测算法在测试集上的预测结果;  
    离线实验的优缺点：
    * 优点
      a. 不需要有对实际系统的控制权  
      b. 不需要用户参与实验  
      c. 速度快，可以测试大量算法  
    * 缺点  
      a. 无法计算商业上关心的指标  
      b. 离线实验的指标和商业指标存在差距  
* 用户调查  
  1) 尽量保证测试用户的分布和真实用户的分布相同  
  2) 尽量保证双盲实验
* 在线实验  
  AB测试是一种很常用的在线评测算法的实验方法。  
  优点:  
  可以公平获得不同算法实际在线时的性能指标，包括商业上关注的指标  
  缺点:  
  周期比较长，必须进行长期的实验才能得到可靠的结果  

### 评测指标
14. 推荐系统的评测指标  
* 用户满意度
> 用户满意度没有办法离线计算，只能通过用户调查（调查问卷）或者在线实验（对用户行为的统计）获得。  
* 预测准确度  
  1)评分预测  
  评分预测的预测准确度一般通过均方根误差(RMSE)和平均绝对误差(MAE)计算  
```
import math
# records[i] = [u, i, rui, pui]
# rui 是指用户u对物品i的实际评分，pui是算法预测出的用户u对物品i的评分

def RMSE(records):
    return math.sqrt(sum([(rui-pui)*(rui-pui) for u, i, rui, pui in records]) / float(len(records)))

def MAE(records):
    return sum([abs(rui-pui) for u, i, rui, pui in records]) / float(len(records))
```

* TopN推荐  
网站提供推荐服务时，一般给用户一个个性化推荐列表，这种推荐叫做TopN推荐  
TopN推荐的预测准确率一般通过准确率(precision)/召回率(recall) 度量  
```
# 计算推荐算法准确率和召回率
def Recommend(user, N):
    ret = []
    # 用户推荐的N个物品i
    pass
    return ret

def precisionRecall(test, N):
    hit, n_recall, n_precision = 0,0,0
    for user, items in test.items():
        rank = Recommend(user, N)
        hit  += len(rank & items)
        n_recall += len(items)
        n_precision += N
    return [hit/(1.0*n_recall), hit/(1.0*n_precision)]
```
为了全面评测TopN推荐的准确率和召回率，一般会选择不同的推荐列表长度N， 计算出一组准确率/召回率，然后画出准确率/召回率曲线。

* 覆盖率  
覆盖率描述一个推荐系统对物品长尾的发掘能力。覆盖率有不同的定义方法，最简单的定义为推荐系统能够推荐出来的物品占总物品集合的比例。  
在信息论和经济学中有两个著名的指标可以用来定义覆盖率。  
  1) 信息熵  
  2) 基尼系数  
社会学领域有一个著名的马太效应，即所谓强者更强，弱者更弱的效应。如果一个系统会增大热门物品和非热门物品的流行度差距，让热门的物品更加热门，不热门的物品更加不热门，那么这个系统就有马太效应。  
评测推荐系统是否具体马太效应的简单方法是使用基尼系数。如果G1是从初始用户行为中计算出的物品流行度的基尼系数，G2是从推荐列表中计算出的物品流行度的基尼系数，如果G2>G1，说明推荐算法具有马太效应。  
```
# 基尼系数
def GiniIndex(p):
    j = 1
    n = len(p)
    G = 0
    for item, weight in sorted(p.items(), key=itemgetter(1)):
        G += (2*j - n -1) * weight
    return G / float(n-1)
```

* 多样性  
多样性描述了推荐列表中物品两两之间的不相似性。

* 新颖性  
* 惊喜性  
* 信任度  
  提高推荐系统的信任度主要有两种方法。
  1) 增加推荐系统的透明度，而增加推荐系统透明度的主要办法是提供推荐解释。  
  2) 考虑用户的社交网络信息，利用用户的好友信息给用户做推荐，并且用好友进行推荐解释。  
* 实时性  
  推荐系统的实时性包括两个方面。
  1) 推荐系统需要实时地更新推荐列表来满足用户新的行为变化。  
  2) 推荐系统需要能够将新加入系统的物品推荐给用户。**主要考验推荐系统处理物品冷启动的能力**
* 健壮性  
健壮性指标衡量了一个推荐系统抗击作弊的能力。  
* 商业目标  

离线实验的优化目标是
**最大化预测准确度**  
使得 **覆盖率 > A**
     **多样性 > B**
     **新颖性 > C**

15. 评测维度辅助评测指标看查看一个算法在什么情况下性能最好。  
* 用户维度
  1) 人口统计学信息  
  2) 活跃度  
  3) 是不是新用户  
* 物品维度  
  1) 物品属性信息  
  2) 流行度  
  3) 平均分  
  4) 是不是新加入的物品  
* 时间维度  
  1) 季节  
  2) 工作日还是周末  
  3) 白天还是晚上 


### 参考文献
1. 项亮. 推荐系统实践[M]. 北京: 人民邮电出版社, 2012.